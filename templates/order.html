{% extends 'index.html' %}
{% block head %}
<link rel="stylesheet" href="static/css/order.css">
<title> MOZETKA | Оформление заказа </title>
{% endblock %}
{% block content %}
<!-- TODO: Make this all look nicer -->
<form action='/order' method='post'>
    <ul class="form">
        <!-- TODO: Add autofill from user profile here (in the python func) -->
        <li> <input required type="text"  name="phone_number" placeholder="Номер Телефона"> </li>
        <li> <input required type="datetime-local"  name="delivery_date" placeholder="Дата"> </li>
        {% for item in spisok %}
            <div class="basket">
                <span class="basket-item-name"> {{ item.name }} </span>
                <span class="basket-item-price"> {{ item.price }} </span>
                <img src="{{ item.img }}" width="250" height="250" alt="Your browser does not support images">
            </div>
        {% endfor %}
        <div class="basket-total"></div>
        <!-- TODO: Move the button below to a nice menu that scrolls with the screen, while keeping the functionality-->
        <li> <button type="submit">Заказ Подтверждаю</button> </li>
    </ul>
</form>
<script>
    window.onload( function() {
        let items = document.querySelectorAll('basket-item-price');
        let sum = 0;
        items.forEach(function(elem) {
            sum = sum + Number(elem);
        });
        let basket-total = document.querySelector("basket-total");
        basket-total.innerHTML = "TOTAL PRICE " + sum;
    });
</script>
<!-- TODO: Add basket integration here-->
<!-- TODO: Add delivery selection here -->
<!-- TODO: Add payment type selection here -->
<!-- TODO: Add a nice final menu with submit button and sth else -->

{{ error }}
{% endblock %}
